(()=>{"use strict";var e="";const t=document.querySelector("#card-template")?.content;function o(e,o,r,n){if(!t)return;const p=t.cloneNode(!0).querySelector(".card"),c=p.querySelector(".card__image"),s=p.querySelector(".card__title"),u=p.querySelector(".card__delete-button"),i=p.querySelector(".card__like-button");return c.src=e.link,c.alt=e.name,s.textContent=e.name,i.addEventListener("click",(()=>r(i))),u.addEventListener("click",(()=>n(p))),c.addEventListener("click",(()=>o(e))),p}function r(e){e&&!e.classList.contains("popup_is-opened")&&(e.classList.add("popup_is-opened"),document.addEventListener("keydown",p))}function n(e){e&&e.classList.contains("popup_is-opened")&&(e.classList.add("popup_fade-out"),requestAnimationFrame((()=>{setTimeout((()=>{e.classList.remove("popup_is-opened","popup_fade-out"),document.removeEventListener("keydown",p)}),300)})))}function p(e){const t=document.querySelector(".popup_is-opened");"Escape"===e.key&&t&&n(t)}function c(e){e.target.classList.contains("popup")&&n(e.target)}function s(e,t,o,r){const n=e.querySelector(`#${t.id}-error`);t.classList.add(r.inputErrorClass),n.textContent=o,n.classList.add(r.errorClass)}function u(e,t,o){const r=e.querySelector(`#${t.id}-error`);t.classList.remove(o.inputErrorClass),r.classList.remove(o.errorClass),r.textContent=""}function i(e,t,o){e.some((e=>!e.validity.valid||e.classList.contains(o.inputErrorClass)))?(t.classList.add(o.inactiveButtonClass),t.disabled=!0):(t.classList.remove(o.inactiveButtonClass),t.disabled=!1)}function a(e){e.querySelectorAll(".popup__input-error").forEach((e=>{e.textContent=""})),e.querySelectorAll(".popup__input").forEach((e=>{e.classList.remove("popup__input_type_error")}))}const l=e+"images/logo.svg",d=e+"images/avatar.jpg";document.querySelector(".header__logo").src=l,document.querySelector(".profile__image").style.backgroundImage=`url(${d})`;const _={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},m=document.querySelector(".places__list"),y={addCard:document.querySelector(".popup_type_new-card"),editProfile:document.querySelector(".popup_type_edit"),image:document.querySelector(".popup_type_image")},f=document.querySelector(".profile__edit-button"),v=document.querySelector(".profile__add-button"),S=document.querySelector(".profile__title"),q=document.querySelector(".profile__description");function g(e){e.classList.toggle("card__like-button_is-active")}function L(e){e.remove()}function k(e){const t=y.image.querySelector(".popup__image"),o=y.image.querySelector(".popup__caption");t.src=e.link,t.alt=e.name,o.textContent=e.name,r(y.image)}f?.addEventListener("click",(()=>{const e=y.editProfile.querySelector(".popup__form"),t=e.querySelector(".popup__input_type_name"),o=e.querySelector(".popup__input_type_description");t.value=S.textContent,o.value=q.textContent,a(e),r(y.editProfile)})),v?.addEventListener("click",(()=>{const e=y.addCard.querySelector(".popup__form");e.reset(),a(e),r(y.addCard)})),document.querySelectorAll(".popup").forEach((e=>{e.addEventListener("click",c)})),document.querySelectorAll(".popup__close").forEach((e=>{e.addEventListener("click",(e=>{n(e.target.closest(".popup"))}))})),y.editProfile.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault();const t=e.target,o=t.querySelector(".popup__input_type_name"),r=t.querySelector(".popup__input_type_description");S.textContent=o.value,q.textContent=r.value,n(y.editProfile)})),y.addCard.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault();const t=e.target,r=t.querySelector(".popup__input_type_card-name"),p=t.querySelector(".popup__input_type_url"),c=o({name:r.value,link:p.value},k,g,L);m.prepend(c),t.reset(),function(e,t){const o=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);e.reset(),o.forEach((o=>{u(e,o,t)})),r.disabled=!0,r.classList.add(t.inactiveButtonClass)}(t,_),n(y.addCard)})),function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((t=>{!function(e,t){const o=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);i(o,r,t),o.forEach((n=>{n.addEventListener("input",(()=>{!function(e,t,o){const r=t.value.length,n=t.hasAttribute("minlength")?t.minLength:0,p=t.hasAttribute("maxlength")?t.maxLength:1e3;t.value?r<n?s(e,t,`Минимум ${n} символов. Сейчас ${r} символов.`,o):r>p?s(e,t,`Максимум ${p} символов`,o):t.validity.valid?u(e,t,o):s(e,t,t.validationMessage,o):s(e,t,"Вы пропустили это поле",o)}(e,n,t),i(o,r,t)}))}))}(t,e)}))}({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"}),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((e=>{const t=o(e,k,g,L);m.append(t)}))})();